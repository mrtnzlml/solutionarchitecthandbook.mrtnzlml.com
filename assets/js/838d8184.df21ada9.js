"use strict";(self.webpackChunkuniversity=self.webpackChunkuniversity||[]).push([[5677],{173:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"learn/duplicates-detection/configuration-examples","title":"Duplicates detection: Configuration examples","description":"Detect duplicates based on fields and relations","source":"@site/docs/learn/duplicates-detection/configuration-examples.md","sourceDirName":"learn/duplicates-detection","slug":"/learn/duplicates-detection/configuration-examples","permalink":"/docs/learn/duplicates-detection/configuration-examples","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Duplicates detection: Configuration examples","sidebar_label":"Configuration examples"},"sidebar":"learnSidebar","previous":{"title":"Duplicates detection","permalink":"/docs/learn/duplicates-detection/"},"next":{"title":"Emails & email ingestion","permalink":"/docs/learn/emails/"}}');var s=t(4848),a=t(8453);const o={sidebar_position:1,title:"Duplicates detection: Configuration examples",sidebar_label:"Configuration examples"},d="Configuration examples",l={},r=[{value:"Detect duplicates based on fields and relations",id:"detect-duplicates-based-on-fields-and-relations",level:2},{value:"Based the <code>/annotations/search</code> endpoint and MQL query",id:"based-the-annotationssearch-endpoint-and-mql-query",level:3},{value:"Based the <code>/annnotations</code> endpoint",id:"based-the-annnotations-endpoint",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"configuration-examples",children:"Configuration examples"})}),"\n",(0,s.jsx)(n.h2,{id:"detect-duplicates-based-on-fields-and-relations",children:"Detect duplicates based on fields and relations"}),"\n",(0,s.jsx)(n.p,{children:"This is probably the most common use case for duplicates detection. It detects duplicates based on the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Content of ",(0,s.jsx)(n.code,{children:"document_id"})," field"]}),"\n",(0,s.jsxs)(n.li,{children:["Content of ",(0,s.jsx)(n.code,{children:"supplier_id"})," field (since two suppliers can use the same numbering scheme)"]}),"\n",(0,s.jsx)(n.li,{children:'Compares binary content of the files ("relation")'}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If duplicate is detected, field ",(0,s.jsx)(n.code,{children:"is_rossum_duplicate"})," is set to ",(0,s.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsxs)("summary",{children:["Recommended configuration of the ",(0,s.jsx)(n.code,{children:"is_rossum_duplicate"})," datapoint."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "rir_field_names": [],\n  "constraints": {\n    "required": true\n  },\n  "score_threshold": 0.0,\n  "default_value": "false",\n  "category": "datapoint",\n  "id": "is_rossum_duplicate",\n  "label": "is_rossum_duplicate",\n  "hidden": true,\n  "disable_prediction": true,\n  "type": "enum",\n  "can_export": false,\n  "ui_configuration": {\n    "type": "data",\n    "edit": "disabled"\n  },\n  "options": [\n    {\n      "value": "true",\n      "label": "true"\n    },\n    {\n      "value": "false",\n      "label": "false"\n    }\n  ]\n}\n'})})]}),"\n",(0,s.jsxs)(n.h3,{id:"based-the-annotationssearch-endpoint-and-mql-query",children:["Based the ",(0,s.jsx)(n.code,{children:"/annotations/search"})," endpoint and MQL query"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "configurations": [\n    {\n      "logic": [\n        {\n          "actions": [\n            {\n              "type": "fill_field",\n              "field_to_fill": "is_rossum_duplicate",\n              "value_to_fill": "true"\n            },\n            {\n              "type": "mark_duplicate"\n            }\n          ],\n          "search_query": {\n            "query": {\n              "$and": [\n                {\n                  "status": {\n                    "$nin": ["split", "purged"]\n                  }\n                },\n                {\n                  "field.document_id.string": {\n                    "$ne": ""\n                  }\n                },\n                {\n                  "field.document_id.string": {\n                    "$eq": "@{document_id}"\n                  }\n                },\n                {\n                  "field.sender_match.string": {\n                    "$ne": ""\n                  }\n                },\n                {\n                  "field.sender_match.string": {\n                    "$eq": "@{supplier_id}"\n                  }\n                }\n              ]\n            }\n          }\n        }\n      ],\n      "trigger_events": ["annotation_content"],\n      "trigger_actions": ["initialize", "started", "updated"]\n    },\n    {\n      "logic": [\n        {\n          "rules": [\n            {\n              "id": 1,\n              "attribute": "relation"\n            }\n          ],\n          "actions": [\n            {\n              "type": "fill_field",\n              "field_to_fill": "is_rossum_duplicate",\n              "value_to_fill": "true"\n            }\n          ],\n          "matching_flow": ["1"]\n        }\n      ],\n      "trigger_events": ["annotation_content"],\n      "trigger_actions": ["initialize"]\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"based-the-annnotations-endpoint",children:["Based the ",(0,s.jsx)(n.code,{children:"/annnotations"})," endpoint"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "configurations": [\n    {\n      "logic": [\n        {\n          "rules": [\n            {\n              "id": 1,\n              "attribute": "field",\n              "field_schema_id": "document_id"\n            },\n            {\n              "id": 2,\n              "attribute": "field",\n              "field_schema_id": "supplier_id"\n            },\n            {\n              "id": 3,\n              "attribute": "relation"\n            }\n          ],\n          "scope": {\n            "object": "queue",\n            "statuses": [\n              "failed_import",\n              "split",\n              "to_review",\n              "reviewing",\n              "in_workflow",\n              "confirmed",\n              "rejected",\n              "exporting",\n              "exported",\n              "failed_export",\n              "postponed",\n              "deleted"\n            ]\n          },\n          "actions": [\n            {\n              "type": "fill_field",\n              "field_to_fill": "is_rossum_duplicate",\n              "value_to_fill": "true"\n            }\n          ],\n          "matching_flow": ["1and2", "3"]\n        }\n      ],\n      "trigger_events": ["annotation_content"],\n      "trigger_actions": ["initialize", "started", "user_update", "updated"]\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Later, users can decide what to do with the ",(0,s.jsx)(n.code,{children:"is_rossum_duplicate"})," information. Typically, we display warning or error message."]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var i=t(6540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);